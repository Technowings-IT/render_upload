âœ… Configuration validated successfully
ğŸ“¡ Server will listen on: 0.0.0.0:3000
ğŸ”Œ WebSocket ping interval: 25000ms
â±ï¸ Connection timeout: 180000ms
ğŸš— Max speeds: 1m/s linear, 1.5rad/s angular
âœ… ROS2ScriptManager initialized successfully
ğŸš€ Initializing AMR Fleet Management System...
ğŸ“‚ Initializing storage manager...
ğŸ“± Loaded 1 devices
ğŸ“‹ Loaded 0 orders for 0 devices
âš ï¸ Invalid map data for device Piros, skipping
âš ï¸ Invalid map data for device Piros_complete_map_Piros_1753246952266, skipping
âš ï¸ Invalid map data for device Piros_index, skipping
âš ï¸ Invalid map data for device piros, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1751435635469, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1751435680718, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1751438225636, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1751456549331, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1751456819374, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1751456889142, skipping
âš ï¸ Invalid map data for device piros_complete_map_piros_1753166252034, skipping
âš ï¸ Invalid map data for device piros_index, skipping
ğŸ—ºï¸ Loaded maps for 0 devices
ğŸ“‚ All persistent data loaded
âœ… Storage Manager initialized
âœ… Storage manager initialized
ğŸ¤– Initializing ROS2 connection...
ğŸ”„ Initializing ROS2 connection (attempt 1/3)...
âœ… ROS2 context initialized
âœ… ROS2 node created: AMR_fleet_backend_node
âœ… Publishers initialized with ROS node
ğŸ“¤ Created publisher for topic: /cmd_vel_joystick (geometry_msgs/msg/Twist)
ğŸ“¤ Created publisher for topic: /target_pose (geometry_msgs/msg/PoseStamped)
âœ… Essential publishers created
âœ… Subscribers initialized with ROS node for device: piros
âœ… ROS2 node spinning started
ğŸ“¥ Subscribing to essential AMR topics for device: piros...
ğŸ¯ Priority 1: Position tracking...
ğŸ“¥ âœ… Created subscriber for topic: /amcl_pose [geometry_msgs/msg/PoseWithCovarianceStamped]
âœ… Successfully subscribed to AMCL topic: /amcl_pose
ğŸ¯ Priority 2: Costmaps...
ğŸ“¥ âœ… Created subscriber for topic: /global_costmap/costmap [nav_msgs/msg/OccupancyGrid]
âœ… Successfully subscribed to global costmap: /global_costmap/costmap
ğŸ“¥ âœ… Created subscriber for topic: /local_costmap/costmap [nav_msgs/msg/OccupancyGrid]
âœ… Successfully subscribed to local costmap: /local_costmap/costmap
ğŸ¯ Priority 3: Control feedback...
ğŸ“¥ âœ… Created subscriber for topic: /cmd_vel [geometry_msgs/msg/Twist]
âœ… Successfully subscribed to velocity feedback: /cmd_vel [geometry_msgs/msg/Twist]
ğŸ¯ Priority 4: Map...
ğŸ“¥ âœ… Created subscriber for topic: /map [nav_msgs/msg/OccupancyGrid]
âœ… Successfully subscribed to map: /map
ğŸ¯ Priority 5: Navigation progress (optional)...
ğŸ§­ Attempting to subscribe to navigation feedback...
ğŸ“¥ âœ… Created subscriber for topic: /goal_pose [geometry_msgs/msg/PoseStamped]
âœ… Successfully subscribed to navigation feedback: /goal_pose [geometry_msgs/msg/PoseStamped]
ğŸ“Š Attempting to subscribe to navigation status...
ğŸ“¥ âœ… Created subscriber for topic: /move_base/status [actionlib_msgs/msg/GoalStatusArray]
âœ… Successfully subscribed to navigation status: /move_base/status [actionlib_msgs/msg/GoalStatusArray]
ğŸ¯ Priority 6: Battery...
ğŸ“¥ âœ… Created subscriber for topic: /battery_state [sensor_msgs/msg/BatteryState]
âœ… Successfully subscribed to battery: /battery_state
âœ… All topic subscriptions attempted for device: piros
ğŸ’¡ Missing topics are normal - they depend on what ROS2 packages you have installed
âœ… ROS2 connection fully initialized
âœ… ROS2 connection established
ğŸ” Starting ROS health monitor...
âœ… ROS health monitoring started (interval: 30000ms)
ğŸ” ROS health monitor initialized
âœ… ROS health monitor started
ğŸ” Testing ROS2 connectivity...
ğŸ“Š ROS2 connectivity: 0 required topics found
ğŸ”Œ Initializing WebSocket server...
âœ… WebSocket server initialized with enhanced stability
âœ… WebSocket server initialized
ğŸ“¡ Initializing UDP discovery...
âœ… UDP discovery server started
âœ… AMR Fleet Management System initialized successfully
ğŸ’¥ Uncaught Exception: Error: listen EADDRINUSE: address already in use 0.0.0.0:3000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3000
}

ğŸ“´ Received UNCAUGHT_EXCEPTION, starting graceful shutdown...
ğŸ” Stopping ROS health monitor...
ğŸ›‘ ROS health monitoring stopped
ğŸ§¹ ROS health monitor cleaned up
ğŸ¤– Cleaning up ROS2 Script Manager...
ğŸ¤– ROS2Manager: Cleaning up ROS2 Script Manager...
ğŸ¤– ROS2Manager: Cleaned up 0 temporary files
ğŸ”„ Shutting down ROS2 connection...
ğŸ§¹ Cleaning up subscribers...
âœ… Subscribers cleanup complete
âš ï¸ Error destroying publisher /cmd_vel_joystick: info.publisher.destroy is not a function
âš ï¸ Error destroying publisher /target_pose: info.publisher.destroy is not a function
ğŸ§¹ Publishers cleaned up
ğŸ—‘ï¸ ROS node destroyed and spinning state reset
âœ… ROS2 context shutdown
âœ… ROS2 connection shutdown complete
ğŸ¤– ROS2 connection closed
ğŸ”Œ HTTP server closed
ğŸ§¹ Storage Manager cleanup completed
ğŸ’¾ Storage manager cleaned up
âœ… Graceful shutdown completed
